<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>cocoOS: os_applAPI.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cocoOS
   &#160;<span id="projectnumber">3.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('os__appl_a_p_i_8h.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">os_applAPI.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="cocoos_8h.html">cocoos.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac19d6a48c1cb673360ae220aaf2a9d53"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>()&#160;&#160;&#160;OS_BEGIN</td></tr>
<tr class="separator:ac19d6a48c1cb673360ae220aaf2a9d53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7912af19af4a033fd9caf27879614945"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>()&#160;&#160;&#160;OS_END</td></tr>
<tr class="separator:a7912af19af4a033fd9caf27879614945"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8232a672a6d4f3a4532bea410a0b1ef"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>(x)&#160;&#160;&#160;OS_WAIT_TICKS(x,0)</td></tr>
<tr class="separator:ad8232a672a6d4f3a4532bea410a0b1ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aade8755cf226e97b98eff894310f4257"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#aade8755cf226e97b98eff894310f4257">task_wait_id</a>(id, x)&#160;&#160;&#160;OS_WAIT_TICKS(x,id)</td></tr>
<tr class="separator:aade8755cf226e97b98eff894310f4257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a777527d4d0896af65a49a662fd1dff3f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a777527d4d0896af65a49a662fd1dff3f">task_suspend</a>(id)&#160;&#160;&#160;OS_SUSPEND_TASK( id )</td></tr>
<tr class="separator:a777527d4d0896af65a49a662fd1dff3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6fc437b07612c85f0857e5f96b61fd0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ad6fc437b07612c85f0857e5f96b61fd0">task_resume</a>(id)&#160;&#160;&#160;OS_RESUME_TASK( id )</td></tr>
<tr class="separator:ad6fc437b07612c85f0857e5f96b61fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576b2326d068ab852846ee612c7b954c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a576b2326d068ab852846ee612c7b954c">event_wait</a>(event)&#160;&#160;&#160;OS_WAIT_SINGLE_EVENT(event,0)</td></tr>
<tr class="separator:a576b2326d068ab852846ee612c7b954c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf6bffac3935c670ced14cf963fb0427"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#adf6bffac3935c670ced14cf963fb0427">event_wait_timeout</a>(event, timeout)&#160;&#160;&#160;OS_WAIT_SINGLE_EVENT(event,timeout)</td></tr>
<tr class="separator:adf6bffac3935c670ced14cf963fb0427"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a148bf0f2ab640ccf1cf29229d61defb6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a148bf0f2ab640ccf1cf29229d61defb6">event_wait_multiple</a>(waitAll, args...)&#160;&#160;&#160;OS_WAIT_MULTIPLE_EVENTS( waitAll, args)</td></tr>
<tr class="separator:a148bf0f2ab640ccf1cf29229d61defb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a194e9ed0f676ffc46a782754b58a0475"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a194e9ed0f676ffc46a782754b58a0475">event_signal</a>(event)&#160;&#160;&#160;OS_SIGNAL_EVENT(event)</td></tr>
<tr class="separator:a194e9ed0f676ffc46a782754b58a0475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90cd2126d49864ddb72738c12a01b34e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a90cd2126d49864ddb72738c12a01b34e">event_ISR_signal</a>(event)&#160;&#160;&#160;OS_INT_SIGNAL_EVENT(event)</td></tr>
<tr class="separator:a90cd2126d49864ddb72738c12a01b34e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab14d890b777d3b2a9e4c83a3ec15dd31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ab14d890b777d3b2a9e4c83a3ec15dd31">sem_wait</a>(sem)&#160;&#160;&#160;OS_WAIT_SEM(sem)</td></tr>
<tr class="separator:ab14d890b777d3b2a9e4c83a3ec15dd31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5011c236fb03784283e6476e9ae5adb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#aa5011c236fb03784283e6476e9ae5adb">sem_signal</a>(sem)&#160;&#160;&#160;OS_SIGNAL_SEM(sem)</td></tr>
<tr class="separator:aa5011c236fb03784283e6476e9ae5adb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a429115c0709c08ce7459ff7e59cc8e36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a429115c0709c08ce7459ff7e59cc8e36">sem_ISR_signal</a>(sem)&#160;&#160;&#160;OS_SIGNAL_SEM_NO_SCHEDULE(sem)</td></tr>
<tr class="separator:a429115c0709c08ce7459ff7e59cc8e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a017f7852a4fe5b619c58a9adf3d57bd7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a017f7852a4fe5b619c58a9adf3d57bd7">msg_post</a>(task, msg)&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, 0, 0, 0)</td></tr>
<tr class="separator:a017f7852a4fe5b619c58a9adf3d57bd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a508ce7180baed355bcf28f22ce23bf4e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a508ce7180baed355bcf28f22ce23bf4e">msg_post_async</a>(task, msg)&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, 0, 0, 1)</td></tr>
<tr class="separator:a508ce7180baed355bcf28f22ce23bf4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaae70bdc9e52397b8cb61698d850cda"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#abaae70bdc9e52397b8cb61698d850cda">msg_post_in</a>(task, msg, delay)&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, delay, 0, 0)</td></tr>
<tr class="separator:abaae70bdc9e52397b8cb61698d850cda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d4ff9caf0714728a46973fe7ef76868"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a1d4ff9caf0714728a46973fe7ef76868">msg_post_every</a>(task, msg, period)&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, period, period, 0)</td></tr>
<tr class="separator:a1d4ff9caf0714728a46973fe7ef76868"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac09ba62464c1027ee133b7a6878bfa83"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ac09ba62464c1027ee133b7a6878bfa83">msg_receive</a>(task, pMsg)&#160;&#160;&#160;OS_MSG_Q_RECEIVE( task, pMsg, 0 )</td></tr>
<tr class="separator:ac09ba62464c1027ee133b7a6878bfa83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab47cae225480abc384877006e02b9ff7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ab47cae225480abc384877006e02b9ff7">msg_receive_async</a>(task, pMsg)&#160;&#160;&#160;OS_MSG_Q_RECEIVE( task, pMsg, 1 )</td></tr>
<tr class="separator:ab47cae225480abc384877006e02b9ff7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66288422355db64c18c53676e53eddb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get</a>(task)&#160;&#160;&#160;OS_MSG_Q_GET( task )</td></tr>
<tr class="separator:ae66288422355db64c18c53676e53eddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc67691f29549315143cc60ff43e2306"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give</a>(task)&#160;&#160;&#160;OS_MSG_Q_GIVE( task )</td></tr>
<tr class="separator:adc67691f29549315143cc60ff43e2306"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6cc2e63d83267ff5059bf0a76b302a09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a6cc2e63d83267ff5059bf0a76b302a09">os_init</a> (void)</td></tr>
<tr class="separator:a6cc2e63d83267ff5059bf0a76b302a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19c7111cf2121a69331d99dabe3e9df0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a> (void)</td></tr>
<tr class="separator:a19c7111cf2121a69331d99dabe3e9df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d7bc0554f6b515785211dd2c3f2d3d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a1d7bc0554f6b515785211dd2c3f2d3d9">os_tick</a> (void)</td></tr>
<tr class="separator:a1d7bc0554f6b515785211dd2c3f2d3d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac48c31882821ef8c2acef85235ee3d13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ac48c31882821ef8c2acef85235ee3d13">os_sub_tick</a> (uint8_t id)</td></tr>
<tr class="separator:ac48c31882821ef8c2acef85235ee3d13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2025fabb507973af46a65be92eca1dd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a2025fabb507973af46a65be92eca1dd8">os_sub_nTick</a> (uint8_t id, uint16_t nTicks)</td></tr>
<tr class="separator:a2025fabb507973af46a65be92eca1dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb53dc7146d0e27f8ac2675f62dd6124"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a> (taskproctype taskproc, uint8_t prio, Msg_t *msgPool, uint8_t poolSize, uint16_t msgSize)</td></tr>
<tr class="separator:adb53dc7146d0e27f8ac2675f62dd6124"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5587eb98c16ed4dd2adaa8ae2f3bb1e1"><td class="memItemLeft" align="right" valign="top">TaskState_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a5587eb98c16ed4dd2adaa8ae2f3bb1e1">task_state_get</a> (taskproctype taskproc)</td></tr>
<tr class="separator:a5587eb98c16ed4dd2adaa8ae2f3bb1e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e114be01c136878fc271be2a9c45cf"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ab9e114be01c136878fc271be2a9c45cf">task_id_get</a> (taskproctype taskproc)</td></tr>
<tr class="separator:ab9e114be01c136878fc271be2a9c45cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36df952f331631590dc3a982e0e8a2d4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a36df952f331631590dc3a982e0e8a2d4">task_kill</a> (taskproctype taskproc)</td></tr>
<tr class="separator:a36df952f331631590dc3a982e0e8a2d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaecd95706696b8ff18d5ef74d139d750"><td class="memItemLeft" align="right" valign="top">Sem_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#aaecd95706696b8ff18d5ef74d139d750">sem_bin_create</a> (uint8_t initial)</td></tr>
<tr class="separator:aaecd95706696b8ff18d5ef74d139d750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cfb5b3cc72fdaed17009a0cae7fd725"><td class="memItemLeft" align="right" valign="top">Sem_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a9cfb5b3cc72fdaed17009a0cae7fd725">sem_counting_create</a> (uint8_t max, uint8_t initial)</td></tr>
<tr class="separator:a9cfb5b3cc72fdaed17009a0cae7fd725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ba027b0848884aa6a2f5a346444be3"><td class="memItemLeft" align="right" valign="top">Evt_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a> (void)</td></tr>
<tr class="separator:a04ba027b0848884aa6a2f5a346444be3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae28468ad6bb58df9d34ebd5bd3daa548"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#ae28468ad6bb58df9d34ebd5bd3daa548">event_signaling_taskId_get</a> (Evt_t ev)</td></tr>
<tr class="separator:ae28468ad6bb58df9d34ebd5bd3daa548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6723f9f2646d57c8a5e9bbd7dbc5279c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="os__appl_a_p_i_8h.html#a6723f9f2646d57c8a5e9bbd7dbc5279c">os_cbkSleep</a> (void)</td></tr>
<tr class="separator:a6723f9f2646d57c8a5e9bbd7dbc5279c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>cocoOS API header file </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a90cd2126d49864ddb72738c12a01b34e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define event_ISR_signal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">event)</td><td></td>
          <td>&#160;&#160;&#160;OS_INT_SIGNAL_EVENT(event)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for signalling an event from an ISR
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event,:</td><td>the event to be signalled</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Evt_t evRxChar;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> evRxChar = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">ISR (SIG_UART_RECV) {   </div>
<div class="line">    rx.data[ rx.head ] = UDR;</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a90cd2126d49864ddb72738c12a01b34e">event_ISR_signal</a>( evRxChar );</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a194e9ed0f676ffc46a782754b58a0475"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define event_signal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">event)</td><td></td>
          <td>&#160;&#160;&#160;OS_SIGNAL_EVENT(event)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for signalling an event.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event,:</td><td>the event to be signalled</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Evt_t myEvent;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> myEvent = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#a194e9ed0f676ffc46a782754b58a0475">event_signal</a>( myEvent );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a576b2326d068ab852846ee612c7b954c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define event_wait</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">event)</td><td></td>
          <td>&#160;&#160;&#160;OS_WAIT_SINGLE_EVENT(event,0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for wait for a single event.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event,:</td><td>the event to wait for</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Evt_t myEvent;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> myEvent = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#a576b2326d068ab852846ee612c7b954c">event_wait</a>( myEvent );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a148bf0f2ab640ccf1cf29229d61defb6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define event_wait_multiple</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">waitAll, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">args...&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_WAIT_MULTIPLE_EVENTS( waitAll, args)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for wait for multiple events.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">waitAll</td><td>1 if wait for all, 0 if wait for any event </td></tr>
    <tr><td class="paramname">args</td><td>list of Evt_t type events</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Evt_t myEvent1;</div>
<div class="line">Evt_t myEvent2;</div>
<div class="line">Evt_t myEvent3;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> myEvent1 = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
<div class="line"> myEvent2 = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
<div class="line"> myEvent3 = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#a148bf0f2ab640ccf1cf29229d61defb6">event_wait_multiple</a>(1, myEvent1, myEvent2, myEvent3);</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="adf6bffac3935c670ced14cf963fb0427"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define event_wait_timeout</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">event, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">timeout&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_WAIT_SINGLE_EVENT(event,timeout)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for wait for a single event to be signaled or a timeout to occur.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">event,:</td><td>the event to wait for </td></tr>
    <tr><td class="paramname">timeout,:</td><td>maximum wait time in main clock ticks, 16bit value. If timeout = 0, no timeout will be used, and the task will wait forever until the event is signaled.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Evt_t myEvent;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> myEvent = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#adf6bffac3935c670ced14cf963fb0427">event_wait_timeout</a>( myEvent, 100 );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a017f7852a4fe5b619c58a9adf3d57bd7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_post</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, 0, 0, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Posts a message to the message queue of a task.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>task procedure of the task that will receive the message </td></tr>
    <tr><td class="paramname">msg</td><td>the message to post </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Before posting a message, the queue semaphore should be aquired with a call to <a class="el" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get()</a>. When the message has been posted, the semaphore should be released with <a class="el" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give()</a>. If the message queue is full, the task will release the semaphore and wait for the queue change event to be signaled by another task. When the event is signaled, the task will again aquire the semaphore and try to post the message.<br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    Msg_t super;</div>
<div class="line">    uint8_t led;</div>
<div class="line">} LedMsg_t;</div>
<div class="line"></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> LedMsg_t msgpool_1[ 16 ];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task1, 1, NULL, 0, 0 );</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task2, 2, msgpool_1, 16, <span class="keyword">sizeof</span>(LedMsg_t) );</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> task1(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">static</span> LedMsg_t ledMsg;</div>
<div class="line"></div>
<div class="line">    ledMsg.super.signal = LED_SIG;</div>
<div class="line">    ledMsg.led = 5;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 3000 );</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get</a>( task2 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a017f7852a4fe5b619c58a9adf3d57bd7">msg_post</a>( task2, ledMsg );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give</a>( task2 );  </div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a508ce7180baed355bcf28f22ce23bf4e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_post_async</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, 0, 0, 1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Posts a message to the message queue of a task. If the queue is full, the
message is not posted and the task continues execution, i.e. it will not wait
for the queue to be non-full.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>task procedure of the task that will receive the message </td></tr>
    <tr><td class="paramname">msg</td><td>the message to post </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Before posting a message, the queue semaphore should be acquired with a call to <a class="el" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get()</a>. When the message has been posted, the semaphore should be released with <a class="el" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give()</a>. Message is not posted if queue is full. <br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    Msg_t super;</div>
<div class="line">    uint8_t led;</div>
<div class="line">} LedMsg_t;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> LedMsg_t msgpool_1[ 16 ];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task1, 1, NULL, 0, 0 );</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task2, 2, msgpool_1, 16, <span class="keyword">sizeof</span>(LedMsg_t) );</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> task1(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">static</span> LedMsg_t ledMsg;</div>
<div class="line"></div>
<div class="line">    ledMsg.super.signal = LED_SIG;</div>
<div class="line">    ledMsg.led = 5;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 3000 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get</a>( task2 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a508ce7180baed355bcf28f22ce23bf4e">msg_post_async</a>( task2, ledMsg );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give</a>( task2 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a1d4ff9caf0714728a46973fe7ef76868"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_post_every</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">period&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, period, period, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Posts a periodic message to the message queue of a task. The message will be delivered
to the receiver task each time the timer expires. The period is related to the master
clock.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>task procedure of the task that will receive the message </td></tr>
    <tr><td class="paramname">msg</td><td>the message to post </td></tr>
    <tr><td class="paramname">period</td><td>period time in master clock ticks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Before posting a message, the queue semaphore should be aquired with a call to <a class="el" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get()</a>. When the message has been posted, the semaphore should be released with <a class="el" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give()</a>. If the message queue is full, the task will release the semaphore and wait for the queue change event to be signaled by another task. When the event is signaled, the task will again aquire the semaphore and try to post the message.<br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    Msg_t super;</div>
<div class="line">    uint8_t led;</div>
<div class="line">} LedMsg_t;</div>
<div class="line"></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> LedMsg_t msgpool_1[ 16 ];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task1, 1, NULL, 0, 0 );</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task2, 2, msgpool_1, 16, <span class="keyword">sizeof</span>(LedMsg_t) );</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> task1(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">static</span> LedMsg_t ledMsg;</div>
<div class="line"></div>
<div class="line">    ledMsg.super.signal = LED_SIG;</div>
<div class="line">    ledMsg.led = 5;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get</a>( task2 );</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a1d4ff9caf0714728a46973fe7ef76868">msg_post_every</a>( task2, ledMsg, 100 );</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give</a>( task2 );</div>
<div class="line">  </div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        ...</div>
<div class="line">        ...</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 3000 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="abaae70bdc9e52397b8cb61698d850cda"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_post_in</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">msg, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">delay&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_MSG_Q_POST(task, msg, delay, 0, 0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Posts a message to the message queue of a task. The message will be received
by the receiver task when the delay has expired. The delay is related to the master
clock.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>task procedure of the task that will receive the message </td></tr>
    <tr><td class="paramname">msg</td><td>the message to post </td></tr>
    <tr><td class="paramname">delay</td><td>post delay time in master clock ticks </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Before posting a message, the queue semaphore should be aquired with a call to <a class="el" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get()</a>. When the message has been posted, the semaphore should be released with <a class="el" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give()</a>. If the message queue is full, the task will release the semaphore and wait for the queue change event to be signaled by another task. When the event is signaled, the task will again aquire the semaphore and try to post the message.<br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    Msg_t super;</div>
<div class="line">    uint8_t led;</div>
<div class="line">} LedMsg_t;</div>
<div class="line"></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> LedMsg_t msgpool_1[ 16 ];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task1, 1, NULL, 0, 0 );</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task2, 2, msgpool_1, 16, <span class="keyword">sizeof</span>(LedMsg_t) );</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> task1(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">static</span> LedMsg_t ledMsg;</div>
<div class="line"></div>
<div class="line">    ledMsg.super.signal = LED_SIG;</div>
<div class="line">    ledMsg.led = 5;</div>
<div class="line">    </div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 3000 );</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get</a>( task2 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#abaae70bdc9e52397b8cb61698d850cda">msg_post_in</a>( task2, ledMsg, 100 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give</a>( task2 );  </div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ae66288422355db64c18c53676e53eddb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_q_get</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task)</td><td></td>
          <td>&#160;&#160;&#160;OS_MSG_Q_GET( task )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Macro for aquiring a message queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task procedure associated with the message queue</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> Should be called before any access to a message queue. See <a class="el" href="os__appl_a_p_i_8h.html#a017f7852a4fe5b619c58a9adf3d57bd7">msg_post()</a> example <br/>
 </dd></dl>

</div>
</div>
<a class="anchor" id="adc67691f29549315143cc60ff43e2306"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_q_give</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task)</td><td></td>
          <td>&#160;&#160;&#160;OS_MSG_Q_GIVE( task )</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Macro for releasing a message queue.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>Task procedure associated with the message queue</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> Should be called after access to a message queue. See <a class="el" href="os__appl_a_p_i_8h.html#a017f7852a4fe5b619c58a9adf3d57bd7">msg_post()</a> example <br/>
 </dd></dl>

</div>
</div>
<a class="anchor" id="ac09ba62464c1027ee133b7a6878bfa83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_receive</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pMsg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_MSG_Q_RECEIVE( task, pMsg, 0 )</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Receives a message from the queue 
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>task procedure of the current task </td></tr>
    <tr><td class="paramname">pMsg</td><td>pointer to a message that will receive a message from the queue</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Before receiving a message, the queue semaphore should be aquired with a call to <a class="el" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get()</a>. When the message has been received, the semaphore should be released with <a class="el" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give()</a>. If the message queue is empty, the task will release the semaphore and wait for the queue change event to be signaled by another task. When the event is signaled, the task will again aquire the semaphore and try to receive a message.<br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    Msg_t super;</div>
<div class="line">    uint8_t led;</div>
<div class="line">} LedMsg_t;</div>
<div class="line"></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> LedMsg_t msgpool_1[ 16 ];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task1, 1, NULL, 0 );</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task2, 2, msgpool_1, 16, <span class="keyword">sizeof</span>(LedMsg_t) );</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> task2(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">static</span> LedMsg_t msg;</div>
<div class="line">    uint8_t led;</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get</a>( task2 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ac09ba62464c1027ee133b7a6878bfa83">msg_receive</a>( task2, &amp;msg );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give</a>( task2 );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( msg.super.signal == LED_SIG ) {</div>
<div class="line">            led = msg.led;</div>
<div class="line">            LED_TOGGLE( led );</div>
<div class="line">        } </div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ab47cae225480abc384877006e02b9ff7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define msg_receive_async</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">task, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">pMsg&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_MSG_Q_RECEIVE( task, pMsg, 1 )</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Receives a message from the queue but returns immediately if queue is empty.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>task procedure of the current task </td></tr>
    <tr><td class="paramname">pMsg</td><td>pointer to a message that will receive a message from the queue. If queue is empty, the signal member of the message pointed at by pMsg will be set to NO_MSG_ID.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None </dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>Before receiving a message, the queue semaphore should be acquired with a call to <a class="el" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get()</a>. When the message has been received, the semaphore should be released with <a class="el" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give()</a>. If the message queue is empty, the task will continue , i.e. this is a no blocking call. <br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    Msg_t super;</div>
<div class="line">    uint8_t led;</div>
<div class="line">} LedMsg_t;</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> LedMsg_t msgpool_1[ 16 ];</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task1, 1, NULL, 0 );</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( task2, 2, msgpool_1, 16, <span class="keyword">sizeof</span>(LedMsg_t) );</div>
<div class="line">    ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a>();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> task2(<span class="keywordtype">void</span>) {</div>
<div class="line">    <span class="keyword">static</span> LedMsg_t msg;</div>
<div class="line">    uint8_t led;</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 3000 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ae66288422355db64c18c53676e53eddb">msg_q_get</a>( task2 );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ab47cae225480abc384877006e02b9ff7">msg_receive_async</a>( task2, &amp;msg );</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#adc67691f29549315143cc60ff43e2306">msg_q_give</a>( task2 );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( msg.super.signal == LED_SIG ) {</div>
<div class="line">            led = msg.led;</div>
<div class="line">            LED_TOGGLE( led );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( msg.super.signal == NO_MSG_ID ) {</div>
<div class="line">            <span class="comment">/* Do something else */</span></div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a429115c0709c08ce7459ff7e59cc8e36"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sem_ISR_signal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sem)</td><td></td>
          <td>&#160;&#160;&#160;OS_SIGNAL_SEM_NO_SCHEDULE(sem)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for releasing a semaphore from within an ISR.
The semaphore is signalled and waiting tasks will be set to ready state, but
scheduling will not be done. Scheduling will be performed when the ISR has finished
and the interrupted task calls a scheduling function.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>Semaphore.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Sem_t mySem;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> mySem = sem_create( 0 );</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">ISR(<span class="keywordtype">void</span>) {</div>
<div class="line"></div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#a429115c0709c08ce7459ff7e59cc8e36">sem_ISR_signal</a>( mySem );</div>
<div class="line">  ...</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="aa5011c236fb03784283e6476e9ae5adb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sem_signal</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sem)</td><td></td>
          <td>&#160;&#160;&#160;OS_SIGNAL_SEM(sem)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for releasing a semaphore.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>Semaphore.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Sem_t mySem;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> mySem = sem_create( 0 );</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#aa5011c236fb03784283e6476e9ae5adb">sem_signal</a>( mySem );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ab14d890b777d3b2a9e4c83a3ec15dd31"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define sem_wait</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">sem)</td><td></td>
          <td>&#160;&#160;&#160;OS_WAIT_SEM(sem)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for aquiring a semaphore.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sem</td><td>Semaphore.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line">Sem_t mySem;</div>
<div class="line">main() {</div>
<div class="line"> ...</div>
<div class="line"> mySem = sem_create( 0 );</div>
<div class="line"> ...</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#ab14d890b777d3b2a9e4c83a3ec15dd31">sem_wait</a>( mySem );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a7912af19af4a033fd9caf27879614945"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define task_close</td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td>&#160;&#160;&#160;OS_END</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for definition of task end.
</pre><dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> Should be placed at the end of the task procedure <br/>
 <div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <span class="keyword">static</span> uint8_t i;</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 10 );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ac19d6a48c1cb673360ae220aaf2a9d53"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define task_open</td>
          <td>(</td>
          <td class="paramname">)</td><td></td>
          <td>&#160;&#160;&#160;OS_BEGIN</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for definition of task beginning.
</pre><dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> Should be placed at the beginning of the task procedure <br/>
 <div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <span class="keyword">static</span> uint8_t i;</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 10 );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ad6fc437b07612c85f0857e5f96b61fd0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define task_resume</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">id)</td><td></td>
          <td>&#160;&#160;&#160;OS_RESUME_TASK( id )</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for resuming a task
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>of the task to resume</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>The macro has no effect if the task is not in the SUSPENDED state <br/>
 If the task was waiting for a semaphore when it was suspended, the task will be reset and <br/>
 execution will restart from the task procedure top.<br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line">uint8_t ledTask_id;</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> led_task(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  <span class="keywordflow">for</span>(;;) {</div>
<div class="line">        led_toggle();</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 100 );</div>
<div class="line">  }</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> button_task(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line"> <span class="keywordflow">for</span> (;;) {</div>
<div class="line">     <span class="keywordflow">if</span> ( button_1_Pressed ) {</div>
<div class="line">       <a class="code" href="os__appl_a_p_i_8h.html#a777527d4d0896af65a49a662fd1dff3f">task_suspend</a>( ledTask_id );</div>
<div class="line">     }</div>
<div class="line">     <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( button_2_Pressed ){</div>
<div class="line">       <a class="code" href="os__appl_a_p_i_8h.html#ad6fc437b07612c85f0857e5f96b61fd0">task_resume</a>( ledTask_id );</div>
<div class="line">     }</div>
<div class="line"> }</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">void</span> ) {</div>
<div class="line">        ...</div>
<div class="line">        ledTask_id = <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( led_task, 1, msgPool, POOL_SIZE, <span class="keyword">sizeof</span>(Msg_t) );</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( button_task, 2, NULL, 0, 0 );</div>
<div class="line">        ...</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="a777527d4d0896af65a49a662fd1dff3f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define task_suspend</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">id)</td><td></td>
          <td>&#160;&#160;&#160;OS_SUSPEND_TASK( id )</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for suspending a task
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>of the task to suspend</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>If the task to suspend is the same as the current running task, the task is immediately suspended and other tasks are scheduled to execute. If the task to suspend is another than the current task, that task is immediately put in suspended state, and the current task continues to execute. <br/>
 <b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">static</span> Msg_t msgPool[ POOL_SIZE ];</div>
<div class="line">uint8_t task1_id;</div>
<div class="line">uint8_t task2_id;</div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> led_task(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  <span class="keywordflow">for</span>(;;) {</div>
<div class="line">        led_toggle();</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 100 );</div>
<div class="line">  }</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> button_task(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line"> <span class="keywordflow">for</span> (;;) {</div>
<div class="line">    <span class="keywordflow">if</span> ( buttonPressed ) {</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a777527d4d0896af65a49a662fd1dff3f">task_suspend</a>( task1_id );</div>
<div class="line">    }</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>(10);</div>
<div class="line"> }</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main( <span class="keywordtype">void</span> ) {</div>
<div class="line">    ...</div>
<div class="line">    task1_id = <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( led_task, 1, msgPool, POOL_SIZE, <span class="keyword">sizeof</span>(Msg_t) );</div>
<div class="line">    task2_id = <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( button_task, 2, NULL, 0, 0 );</div>
<div class="line">        ...</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="ad8232a672a6d4f3a4532bea410a0b1ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define task_wait</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x)</td><td></td>
          <td>&#160;&#160;&#160;OS_WAIT_TICKS(x,0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for suspending a task a specified amount of ticks of the master clock.
When the wait time has expired, the task is ready to execute again and will continue
at the next statement when the task is scheduled to run.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">x</td><td>Number of master clock ticks to wait.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 10 );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<a class="anchor" id="aade8755cf226e97b98eff894310f4257"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define task_wait_id</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">id, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">x&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>&#160;&#160;&#160;OS_WAIT_TICKS(x,id)</td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Macro for suspending a task a specified amount of ticks of a sub clock.
When the wait time has expired, the task is ready to execute again and will continue
at the next statement when the task is scheduled to run.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Sub clock id. Valid range 1-255.</td></tr>
    <tr><td class="paramname">x</td><td>Number of sub clock ticks to wait, 16 bit value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 <div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> myTask(<span class="keywordtype">void</span>) {</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();   </div>
<div class="line">  ...</div>
<div class="line">  <a class="code" href="os__appl_a_p_i_8h.html#aade8755cf226e97b98eff894310f4257">task_wait_id</a>( 2, 10 );</div>
<div class="line">  ...</div>
<div class="line"> <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a04ba027b0848884aa6a2f5a346444be3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Evt_t event_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates an event.</p>
<dl class="section return"><dt>Returns</dt><dd>Returns an event.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 An event is created by declaring a variable of type Evt_t and then assigning the <a class="el" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create()</a> return value to that variable.</dd></dl>
<div class="fragment"><div class="line">Evt_t myEvent;</div>
<div class="line">myEvent = <a class="code" href="os__appl_a_p_i_8h.html#a04ba027b0848884aa6a2f5a346444be3">event_create</a>();</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ae28468ad6bb58df9d34ebd5bd3daa548"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t event_signaling_taskId_get </td>
          <td>(</td>
          <td class="paramtype">Evt_t&#160;</td>
          <td class="paramname"><em>ev</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gets the Task Id of the task that signaled the event.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ev</td><td>event</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Id of task that signaled the event. </dd>
<dd>
NO_TID if a timeout occurred before the event was signaled.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 A task can make a call to this function when it has resumed execution after waiting for an event to find out which other task signaled the event.</dd></dl>
<div class="fragment"><div class="line"><a class="code" href="os__appl_a_p_i_8h.html#a576b2326d068ab852846ee612c7b954c">event_wait</a>(event);</div>
<div class="line">signalingTask = <a class="code" href="os__appl_a_p_i_8h.html#ae28468ad6bb58df9d34ebd5bd3daa548">event_signaling_taskId_get</a>(event);</div>
<div class="line"><span class="keywordflow">if</span> ( signalingTask == Task2_id ) {</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a6723f9f2646d57c8a5e9bbd7dbc5279c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_cbkSleep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Callback called by the os kernel when all tasks are in waiting state. Here you can put the MCU to low power mode. Remember to keep the clock running so we can wake up from sleep. </p>

</div>
</div>
<a class="anchor" id="a6cc2e63d83267ff5059bf0a76b302a09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Initializes the scheduler.
</pre><dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 Should be called early in system setup, before starting the task execution</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">        system_init();</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a6cc2e63d83267ff5059bf0a76b302a09">os_init</a>();</div>
<div class="line">        ...</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a19c7111cf2121a69331d99dabe3e9df0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Starts the task scheduling
</pre><dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 Should be the last line of main.</dd></dl>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">        system_init();</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a6cc2e63d83267ff5059bf0a76b302a09">os_init</a>();</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( myTaskProc, 1, NULL, 0, 0 );</div>
<div class="line">        ...</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a19c7111cf2121a69331d99dabe3e9df0">os_start</a>();</div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a2025fabb507973af46a65be92eca1dd8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_sub_nTick </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>nTicks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Tick function driving the sub clocks. Increments the tick count with nTicks.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>sub clock id, allowed range 1-255. </td></tr>
    <tr><td class="paramname">nTicks</td><td>increment size, 16 bit value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 Could be called at any desired rate to trigger timeouts. <br/>
 Called from a task or from an interrupt ISR.</dd></dl>
<div class="fragment"><div class="line">ISR(SIG_OVERFLOW0) {</div>
<div class="line">        ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a2025fabb507973af46a65be92eca1dd8">os_sub_nTick</a>( 2, 10 );      </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ac48c31882821ef8c2acef85235ee3d13"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_sub_tick </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>id</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Tick function driving the sub clocks
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>sub clock id, allowed range 1-255</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 Could be called at any desired rate to trigger timeouts. <br/>
 Called from a task or from an interrupt ISR.</dd></dl>
<div class="fragment"><div class="line">ISR(SIG_OVERFLOW0) {</div>
<div class="line">        ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac48c31882821ef8c2acef85235ee3d13">os_sub_tick</a>(2);     </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a1d7bc0554f6b515785211dd2c3f2d3d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void os_tick </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Tick function driving the kernel
</pre><dl class="section return"><dt>Returns</dt><dd>None.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 Should be called periodically. Preferably from the clock tick ISR.</dd></dl>
<div class="fragment"><div class="line">ISR(SIG_OVERFLOW0) {</div>
<div class="line">        ...</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a1d7bc0554f6b515785211dd2c3f2d3d9">os_tick</a>();  </div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="aaecd95706696b8ff18d5ef74d139d750"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sem_t sem_bin_create </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>initial</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates and initializes a new binary semaphore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">initial</td><td>value of the semaphore</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the created semaphore.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 A semaphore is created by declaring a variable of type Sem_t and then assigning the sem_bin_create(value) return value to that variable.</dd></dl>
<div class="fragment"><div class="line">Sem_t mySem;</div>
<div class="line">mySem = <a class="code" href="os__appl_a_p_i_8h.html#aaecd95706696b8ff18d5ef74d139d750">sem_bin_create</a>(0);</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a9cfb5b3cc72fdaed17009a0cae7fd725"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Sem_t sem_counting_create </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>initial</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates and initializes a new counting semaphore.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">max</td><td>value of the semaphore </td></tr>
    <tr><td class="paramname">initial</td><td>value of the semaphore</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the created semaphore.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 A semaphore is created by declaring a variable of type Sem_t and then assigning the sem_create(max, 0) return value to that variable.</dd></dl>
<div class="fragment"><div class="line">Sem_t mySem;</div>
<div class="line">mySem = <a class="code" href="os__appl_a_p_i_8h.html#a9cfb5b3cc72fdaed17009a0cae7fd725">sem_counting_create</a>(5,0);</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="adb53dc7146d0e27f8ac2675f62dd6124"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t task_create </td>
          <td>(</td>
          <td class="paramtype">taskproctype&#160;</td>
          <td class="paramname"><em>taskproc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Msg_t *&#160;</td>
          <td class="paramname"><em>msgPool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>poolSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>msgSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Creates a task scheduled by the os. The task is put in the ready state.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskproc</td><td>Function pointer to the task procedure. </td></tr>
    <tr><td class="paramname">prio</td><td>Task priority on a scale 0-255 where 0 is the highest priority. </td></tr>
    <tr><td class="paramname">msgPool</td><td>Pointer to the message pool, containing messages. Ignored if poolSize is 0. </td></tr>
    <tr><td class="paramname">poolSize</td><td>Size of the message pool. Set to 0 if no message pool needed for the task </td></tr>
    <tr><td class="paramname">msgSize</td><td>Size of the message type held in the message queue </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task id of the created task.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd><b>Usage:</b> <br/>
 Should be called early in system setup, before starting the task execution. Only one task per priority level is allowed.</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">static</span> uint8_t taskId;</div>
<div class="line"><span class="keyword">static</span> Msg_t msgpool_1[ POOL_SIZE ];</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>) {</div>
<div class="line">        system_init();</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a6cc2e63d83267ff5059bf0a76b302a09">os_init</a>();</div>
<div class="line">        taskId = <a class="code" href="os__appl_a_p_i_8h.html#adb53dc7146d0e27f8ac2675f62dd6124">task_create</a>( myTaskProc, 1, msgpool_1, POOL_SIZE, <span class="keyword">sizeof</span>(Msg_t) );</div>
<div class="line">        ...</div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="ab9e114be01c136878fc271be2a9c45cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t task_id_get </td>
          <td>(</td>
          <td class="paramtype">taskproctype&#160;</td>
          <td class="paramname"><em>taskproc</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gets the task id of the task associated with the specified task procedure
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskproc</td><td>Function pointer to the task procedure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TaskId of the task</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> waitingTask(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>()</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a576b2326d068ab852846ee612c7b954c">event_wait</a>( event );</div>
<div class="line"></div>
<div class="line">    if ( event_signaling_taskId_get( event ) == task_id_get( signalingTask1 ) ) {</div>
<div class="line">        ...</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> signalingTask1(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();    </div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 900 );</div>
<div class="line">       </div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a194e9ed0f676ffc46a782754b58a0475">event_signal</a>(event);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a36df952f331631590dc3a982e0e8a2d4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void task_kill </td>
          <td>(</td>
          <td class="paramtype">taskproctype&#160;</td>
          <td class="paramname"><em>taskproc</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Puts the task associated with the specified task procedure in the killed state. 
A killed task, cannot be resumed.
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskproc</td><td>Function pointer to the task procedure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> waitingTask(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a576b2326d068ab852846ee612c7b954c">event_wait</a>( event );</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( <a class="code" href="os__appl_a_p_i_8h.html#ae28468ad6bb58df9d34ebd5bd3daa548">event_signaling_taskId_get</a>( event ) == <a class="code" href="os__appl_a_p_i_8h.html#ab9e114be01c136878fc271be2a9c45cf">task_id_get</a>( signalingTask1 ) ) {</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a36df952f331631590dc3a982e0e8a2d4">task_kill</a>( signalingTask1 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> signalingTask1(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();    </div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 900 );</div>
<div class="line">       </div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a194e9ed0f676ffc46a782754b58a0475">event_signal</a>(event);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="a5587eb98c16ed4dd2adaa8ae2f3bb1e1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskState_t task_state_get </td>
          <td>(</td>
          <td class="paramtype">taskproctype&#160;</td>
          <td class="paramname"><em>taskproc</em>)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Gets the current state of the task associated with the specified procedure
</pre><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">taskproc</td><td>Function pointer to the task procedure.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>State of the task</dd></dl>
<div class="fragment"><div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> led_task500(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();        </div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        LED_TOGGLE(0);</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 500 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> led_task1000(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#ac19d6a48c1cb673360ae220aaf2a9d53">task_open</a>();        </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (;;) {</div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ab14d890b777d3b2a9e4c83a3ec15dd31">sem_wait</a>( buttonSem );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span> ( buttonPressed ) {</div>
<div class="line">            <span class="keywordflow">if</span> ( SUSPENDED &lt; <a class="code" href="os__appl_a_p_i_8h.html#a5587eb98c16ed4dd2adaa8ae2f3bb1e1">task_state_get</a>( led_task500 ) ) {</div>
<div class="line">                <a class="code" href="os__appl_a_p_i_8h.html#a777527d4d0896af65a49a662fd1dff3f">task_suspend</a>( led_task500 );</div>
<div class="line">            }</div>
<div class="line"></div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            <span class="keywordflow">if</span> ( SUSPENDED == <a class="code" href="os__appl_a_p_i_8h.html#a5587eb98c16ed4dd2adaa8ae2f3bb1e1">task_state_get</a>( led_task500 ) ) {</div>
<div class="line">                <a class="code" href="os__appl_a_p_i_8h.html#ad6fc437b07612c85f0857e5f96b61fd0">task_resume</a>( led_task500 );</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#aa5011c236fb03784283e6476e9ae5adb">sem_signal</a>( buttonSem );</div>
<div class="line"></div>
<div class="line">        LED_TOGGLE(1);</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">        <a class="code" href="os__appl_a_p_i_8h.html#ad8232a672a6d4f3a4532bea410a0b1ef">task_wait</a>( 900 );</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <a class="code" href="os__appl_a_p_i_8h.html#a7912af19af4a033fd9caf27879614945">task_close</a>();</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment --> 
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_885cc87fac2d91e269af0a5a959fa5f6.html">E:</a></li><li class="navelem"><a class="el" href="dir_f05b801e0b78fdf977a4ef848828d685.html">Peter slask</a></li><li class="navelem"><a class="el" href="dir_c11cc9a5de48fd3da827da029210f4b5.html">cocoOS</a></li><li class="navelem"><a class="el" href="dir_c670557b85c24c9925898af5bbb8ea8f.html">trunk</a></li><li class="navelem"><a class="el" href="dir_3d686467e25b15e82741b97af6df6f45.html">Source</a></li><li class="navelem"><a class="el" href="os__appl_a_p_i_8h.html">os_applAPI.h</a></li>
    <li class="footer">Generated on Wed Dec 25 2013 15:49:49 for cocoOS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
